(this["webpackJsonpblog-author-interface"]=this["webpackJsonpblog-author-interface"]||[]).push([[0],{58:function(t,e,n){},61:function(t,e,n){"use strict";n.r(e);var c=n(0),o=n.n(c),a=n(23),r=n.n(a),s=n(3),i=n(18),j=n(6),l=n(25),u=n.n(l),h=n(1);function b(t){var e=Object(c.useState)(""),n=Object(s.a)(e,2),o=n[0],a=n[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),j=i[0],l=i[1],b=Object(c.useState)(!1),d=Object(s.a)(b,2),O=d[0],m=d[1],f=Object(c.useState)(""),p=Object(s.a)(f,2),g=p[0],x=p[1],S=Object(c.useState)(""),v=Object(s.a)(S,2),y=v[0],C=v[1];return O?y?Object(h.jsxs)("p",{children:["Oops an error occured! ",y]}):Object(h.jsx)("p",{children:"Log in successful!"}):Object(h.jsxs)("div",{id:"loginform",children:[Object(h.jsx)("h3",{children:"Welcome back! Log in"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("http://localhost:3000/auth/login",{mode:"cors",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:j})}).then((function(t){return t.json()})).then((function(e){e.user?e.user&&(localStorage.setItem("token","Bearer ".concat(e.token)),m(!0),t.signal(!0)):x(e.info.message)})).catch((function(t){return C(t)}))},children:[Object(h.jsx)("input",{type:"text",name:"username",placeholder:"Username...",value:o,onChange:function(t){a(t.target.value)}}),Object(h.jsx)("input",{type:"password",name:"password",placeholder:"Password...",value:j,onChange:function(t){l(t.target.value)}}),Object(h.jsx)("div",{id:"loginbuttons",children:Object(h.jsx)("button",{id:"login",children:Object(h.jsx)(u.a,{})})}),Object(h.jsx)("p",{id:"message",children:g})]}),Object(h.jsxs)("p",{children:["Don't have an account? Sign up"," ",Object(h.jsx)("a",{href:"/author-frontend/signup",children:"here"}),"!"]})]})}var d=n(12),O=n(19),m=n(20),f=n.n(m),p=n(27),g=n.n(p),x=n(36),S=n.n(x),v=n(37),y=n.n(v);function C(t){var e=t.data,n=Object(c.useState)(!1),o=Object(s.a)(n,2),a=o[0],r=o[1],j=Object(c.useState)(!1),l=Object(s.a)(j,2),u=l[0],b=l[1],d=Object(c.useState)(e.public),m=Object(s.a)(d,2),p=m[0],x=m[1];return u?"":Object(h.jsxs)("li",{className:"article",children:[Object(h.jsx)(i.b,{to:"/author-frontend/article/"+e._id,children:Object(h.jsx)("h4",{children:e.title})}),Object(h.jsx)("p",{children:O.DateTime.fromISO(e.timestamp).toLocaleString({day:"numeric",month:"long",hour:"numeric",hour12:!1,minute:"numeric"})}),Object(h.jsxs)("div",{className:"articlebuttons",children:[e.public||p?"":Object(h.jsx)("button",{onClick:function(){fetch("http://localhost:3000/blog/posts/".concat(e._id),{mode:"cors",method:"PUT",headers:{Authorization:localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({title:e.title,content:e.content,public:!0})}).then((function(t){return t.json()})).then((function(t){e.public=!0,x(!0)})).catch((function(t){return console.log(t)}))},children:Object(h.jsx)(S.a,{})}),e.public&&p?Object(h.jsx)("button",{onClick:function(){fetch("http://localhost:3000/blog/posts/".concat(e._id),{mode:"cors",method:"PUT",headers:{Authorization:localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({title:e.title,content:e.content,public:!1})}).then((function(t){return t.json()})).then((function(t){e.public=!1,x(!1)})).catch((function(t){return console.log(t)}))},children:Object(h.jsx)(y.a,{})}):"",Object(h.jsx)("button",{onClick:function(){r(!a)},children:a?Object(h.jsx)(g.a,{}):Object(h.jsx)(f.a,{})}),a?Object(h.jsx)("button",{onClick:function(){fetch("http://localhost:3000/blog/posts/".concat(e._id),{mode:"cors",method:"DELETE",headers:{Authorization:localStorage.getItem("token")}}).then((function(t){return t.json()})).then((function(t){t.message&&b(!0)})).catch((function(t){return console.log(t)}))},children:"Confirm"}):""]})]},e._id)}var k=n(28),T=n.n(k);function I(t){var e=Object(c.useState)(t.title?t.title:""),n=Object(s.a)(e,2),o=n[0],a=n[1],r=Object(c.useState)(t.content?t.content:""),i=Object(s.a)(r,2),j=i[0],l=i[1],u=Object(c.useState)(!1),b=Object(s.a)(u,2),d=b[0],O=b[1],m=Object(c.useState)([]),f=Object(s.a)(m,2),p=f[0],g=f[1],x=Object(c.useState)(""),S=Object(s.a)(x,2),v=S[0],y=S[1];return Object(h.jsxs)("form",{id:"articleform",onSubmit:function(e){e.preventDefault(),t.edit?fetch("http://localhost:3000/blog/posts/".concat(t.id),{mode:"cors",method:"PUT",headers:{Authorization:localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({title:o,content:j,public:!d})}).then((function(t){return t.json()})).then((function(e){e.errors?g(e.errors):(y(e.message),t.setTitle(o),t.setContent(j),a(""),l(""),O(!1),t.setEdit(!1))})).catch((function(t){return console.log(t)})):fetch("http://localhost:3000/blog/posts",{mode:"cors",method:"POST",headers:{Authorization:localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({title:o,content:j,public:!d})}).then((function(t){return t.json()})).then((function(e){e.errors?g(e.errors):(y(e.message),t.push(e.post),a(""),l(""),O(!1))})).catch((function(t){return console.log(t)}))},children:[Object(h.jsx)("h2",{children:t.edit?"Editor":"Create a new post"}),Object(h.jsx)("input",{type:"text",name:"title",placeholder:"Title...",onChange:function(t){a(t.target.value)},value:o}),Object(h.jsx)("textarea",{name:"content",placeholder:"Content...",onChange:function(t){l(t.target.value)},value:j}),Object(h.jsx)("label",{htmlFor:"public",children:"Is this post private?"}),Object(h.jsx)("input",{type:"checkbox",name:"public",value:d,onChange:function(t){O(t.target.checked)}}),Object(h.jsx)("button",{children:"Post"}),Object(h.jsx)("ul",{children:p.map((function(t){return Object(h.jsx)("li",{children:t.msg},T()())}))}),v]})}var w=n(40),E=n.n(w),L=n(39),A=n.n(L),D=n(38),N=n.n(D);function P(t){var e=Object(c.useState)({}),n=Object(s.a)(e,2),o=n[0],a=n[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),j=i[0],l=i[1],u=Object(c.useState)(!1),b=Object(s.a)(u,2),O=b[0],m=b[1],p=Object(c.useState)([]),g=Object(s.a)(p,2),x=g[0],S=g[1],v=Object(c.useState)(!1),y=Object(s.a)(v,2),k=y[0],T=y[1],w=Object(c.useState)(!1),L=Object(s.a)(w,2),D=L[0],P=L[1],_=Object(c.useState)(""),z=Object(s.a)(_,2),J=z[0],U=z[1];function B(){localStorage.removeItem("token"),window.location.href="/author-frontend"}return Object(c.useEffect)((function(){var t=new AbortController,e=t.signal;fetch("http://localhost:3000/blog/currentuser",{mode:"cors",headers:{Authorization:localStorage.getItem("token")},signal:e}).then((function(t){return t.json()})).then((function(e){a(e),m(!0),t.abort()})).catch((function(e){l(e),t.abort()})),fetch("http://localhost:3000/blog/posts/private",{mode:"cors",headers:{Authorization:localStorage.getItem("token")}}).then((function(t){return t.json()})).then((function(t){S(t)})).catch((function(t){l(t)}))}),[]),O?j?Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Oops! An error occured!"}),Object(h.jsx)("p",{children:j})]}):O?Object(h.jsxs)("div",{children:[Object(h.jsxs)("h2",{children:["Welcome ",o.authData.firstname,"!"]}),Object(h.jsxs)("button",{id:"logout",onClick:B,children:[Object(h.jsx)(N.a,{})," Log out"]}),Object(h.jsxs)("button",{id:"deleteaccount",onClick:function(){D&&fetch("http://localhost:3000/blog/authors/".concat(o.authData._id),{mode:"cors",method:"DELETE",headers:{Authorization:localStorage.getItem("token")}}).then((function(t){return t.json()})).then((function(t){t.error?l(j):t.author?B():U(t.message)})).catch((function(t){l(t),m(!0)})),setTimeout((function(){return P(!1)}),3e3),P(!0)},children:[Object(h.jsx)(f.a,{}),D?"Confirm":"Delete account"]}),Object(h.jsx)("p",{children:J}),Object(h.jsx)("h3",{children:"Currently these are all of your articles:"}),Object(h.jsx)("button",{onClick:function(){T(!k)},name:"new",id:"new",children:k?Object(h.jsx)(A.a,{}):Object(h.jsx)(E.a,{})}),k?Object(h.jsx)(I,{push:function(t){S([].concat(Object(d.a)(x),[t]))}}):"",Object(h.jsx)("ul",{id:"articles",children:x.map((function(t){return Object(h.jsx)(C,{data:t},t._id)}))})]}):void 0:Object(h.jsx)("h2",{children:"Loading..."})}function _(t){var e=Object(c.useState)(!1),n=Object(s.a)(e,2),o=n[0],a=n[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),j=i[0],l=i[1],u=t.data;return""===j?Object(h.jsxs)("div",{className:"comment",children:[Object(h.jsx)("h4",{children:u.name}),Object(h.jsx)("p",{children:u.content}),Object(h.jsx)("p",{id:"commenttimestamp",children:O.DateTime.fromISO(u.timestamp).toLocaleString({day:"numeric",month:"long",hour:"numeric",hour12:!1,minute:"numeric"})}),Object(h.jsxs)("div",{className:"commentbuttons",children:[Object(h.jsx)("button",{onClick:function(){a(!o)},children:o?Object(h.jsx)(g.a,{}):Object(h.jsx)(f.a,{})}),o?Object(h.jsx)("button",{onClick:function(){fetch("http://localhost:3000/blog/posts/".concat(t.articleId,"/comments/").concat(u._id),{mode:"cors",method:"DELETE",headers:{Authorization:localStorage.getItem("token")}}).then((function(t){return t.json()})).then((function(t){t.message&&l(t.message)})).catch((function(t){return console.log(t)}))},children:"Confirm"}):""]})]},u._id):Object(h.jsx)("h4",{children:j})}var z=n(33),J=n.n(z);var U=function(){var t=Object(c.useState)(""),e=Object(s.a)(t,2),n=e[0],o=e[1],a=Object(c.useState)(""),r=Object(s.a)(a,2),i=r[0],l=r[1],u=Object(c.useState)(""),b=Object(s.a)(u,2),d=b[0],m=b[1],f=Object(c.useState)(""),p=Object(s.a)(f,2),g=p[0],x=p[1],S=Object(c.useState)([]),v=Object(s.a)(S,2),y=v[0],C=v[1],k=Object(c.useState)(null),T=Object(s.a)(k,2),w=T[0],E=T[1],L=Object(c.useState)(!1),A=Object(s.a)(L,2),D=A[0],N=A[1],P=Object(c.useState)(!1),z=Object(s.a)(P,2),U=z[0],B=z[1],F=Object(j.g)().id;return Object(c.useEffect)((function(){fetch("http://localhost:3000/blog/posts/".concat(F),{mode:"cors",method:"GET"}).then((function(t){return t.json()})).then((function(t){var e=t.post;o(e.title),l("".concat(e.author.firstname," ").concat(e.author.lastname)),m(O.DateTime.fromISO(e.timestamp).toLocaleString({day:"numeric",month:"long",hour:"numeric",hour12:!1,minute:"numeric"})),x(e.content),N(!0)})).catch((function(t){E(t),console.log(t),N(!0)})),fetch("http://localhost:3000/blog/posts/".concat(F,"/comments"),{mode:"cors",method:"GET"}).then((function(t){return t.json()})).then((function(t){t.error||C(t)})).catch((function(t){E(t),console.log(t)}))}),[F]),w?Object(h.jsxs)("div",{id:"error",children:[Object(h.jsx)("h1",{children:"An error occured!"}),Object(h.jsx)("p",{children:"Try reloading the page."})]}):D?U?Object(h.jsx)("div",{id:"container",children:Object(h.jsxs)("div",{id:"content",children:[Object(h.jsxs)("h1",{children:["You're currently editing \"",n,'"']}),Object(h.jsxs)("button",{onClick:function(){return B(!U)},id:"editbutton",children:[Object(h.jsx)(J.a,{})," Cancel edit"]}),Object(h.jsx)(I,{title:n,setEdit:B,setTitle:o,setContent:x,edit:!0,id:F,content:g})]})}):Object(h.jsxs)("div",{id:"container",children:[Object(h.jsxs)("div",{id:"content",children:[Object(h.jsx)("h1",{children:n}),Object(h.jsxs)("button",{onClick:function(){return B(!U)},id:"editbutton",children:[Object(h.jsx)(J.a,{})," Edit"]}),Object(h.jsx)("h2",{children:i}),Object(h.jsxs)("h4",{children:["Posted on ",d]}),Object(h.jsx)("p",{id:"articletext",children:g})]}),Object(h.jsxs)("div",{id:"comments",children:[Object(h.jsx)("h2",{children:"Comments"}),y.length>0?y.map((function(t){return Object(h.jsx)(_,{articleId:F,data:t},t._id)})):"Currently there are no comments"]})]}):Object(h.jsx)("div",{id:"loading",children:Object(h.jsx)("h1",{children:"Loading content..."})})};function B(t){var e=Object(c.useState)(""),n=Object(s.a)(e,2),o=n[0],a=n[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),j=i[0],l=i[1],b=Object(c.useState)(""),d=Object(s.a)(b,2),O=d[0],m=d[1],f=Object(c.useState)([]),p=Object(s.a)(f,2),g=p[0],x=p[1],S=Object(c.useState)(!1),v=Object(s.a)(S,2),y=v[0],C=v[1],k=Object(c.useState)(""),I=Object(s.a)(k,2),w=I[0],E=I[1],L=Object(c.useState)(""),A=Object(s.a)(L,2),D=A[0],N=A[1];return y?w?Object(h.jsxs)("p",{children:["Something went wrong! ",w]}):Object(h.jsx)("p",{children:"Signup complete!"}):Object(h.jsxs)("div",{id:"loginform",children:[Object(h.jsx)("h2",{children:"Let's sign you up!"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("http://localhost:3000/blog/authors/",{mode:"cors",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstname:j,lastname:O,username:o,password:D})}).then((function(t){return t.json()})).then((function(e){e.author?e.author&&fetch("http://localhost:3000/auth/login",{mode:"cors",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:D})}).then((function(t){return t.json()})).then((function(e){console.log(e),e.user&&e.user&&(localStorage.setItem("token","Bearer ".concat(e.token)),C(!0),t.signal(!0))})).catch((function(t){return E(t)})):x(e.errors)})).catch((function(t){return E(t)}))},children:[Object(h.jsx)("input",{type:"text",name:"firstname",placeholder:"First name...",value:j,onChange:function(t){l(t.target.value)}}),Object(h.jsx)("input",{type:"text",name:"lastname",placeholder:"Last name...",value:O,onChange:function(t){m(t.target.value)}}),Object(h.jsx)("input",{type:"text",name:"username",placeholder:"Username...",value:o,onChange:function(t){a(t.target.value)}}),Object(h.jsx)("input",{type:"password",name:"password",placeholder:"Password...",value:D,onChange:function(t){N(t.target.value)}}),Object(h.jsx)("div",{id:"loginbuttons",children:Object(h.jsx)("button",{id:"login",children:Object(h.jsx)(u.a,{})})}),Object(h.jsx)("ul",{children:g?g.map((function(t){return Object(h.jsx)("li",{children:t.msg},T.a)})):""}),Object(h.jsxs)("p",{children:["Already have an account? Log in ",Object(h.jsx)("a",{href:"/author-frontend/",children:"here"}),"!"]})]})]})}function F(){var t=Object(c.useState)(!1),e=Object(s.a)(t,2),n=e[0],o=e[1];return Object(h.jsxs)(i.a,{children:[Object(h.jsx)("nav",{children:Object(h.jsx)(i.b,{to:"/author-frontend/dashboard",children:Object(h.jsx)("h1",{className:"pagetitle",children:"Nico's Blog (author)"})})}),Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.b,{path:"/author-frontend",exact:!0,children:n||localStorage.getItem("token")?Object(h.jsx)(j.a,{to:"/author-frontend/dashboard"}):Object(h.jsx)(b,{signal:o})}),Object(h.jsx)(j.b,{path:"/author-frontend/signup",exact:!0,children:n||localStorage.getItem("token")?Object(h.jsx)(j.a,{to:"/author-frontend/dashboard"}):Object(h.jsx)(B,{signal:o})}),Object(h.jsx)(j.b,{path:"/author-frontend/dashboard",exact:!0,children:n||localStorage.getItem("token")?Object(h.jsx)(P,{}):Object(h.jsx)(b,{signal:o})}),Object(h.jsx)(j.b,{path:"/author-frontend/article/:id",children:n||localStorage.getItem("token")?Object(h.jsx)(U,{}):Object(h.jsx)(b,{signal:o})})]})]})}n(58);r.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(F,{})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.0176b782.chunk.js.map